%! Package = PACKAGE_NAME
%! Author = baskerville
%! Date = 23/05/23

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{main}[2023/05/23 baskerville's Package]
%%Package options
%% This loads all the requiered packages for a proper compilation. However
%% future versions may affect the processing of the document. Therefore, it
%% TODO add version dates to all packages
%% TODO add warnings for outdated packages
\RequirePackage{etoolbox} %% Control sequence commands
\RequirePackage{graphicx} %% Graphics package for loading images
\RequirePackage{float} %% Float package for placing images in the right place
\RequirePackage{amsmath, onlyamsmath} %% Math packages
\RequirePackage{babel} %% Language packages
\RequirePackage{setspace} %% Line spacing for double spaced documents
\RequirePackage{lipsum} %% Lorem ipsum generator
\RequirePackage{ragged2e} %% For justifying text in Math IA's
\RequirePackage[style=numeric]{biblatex} %% Bibliography package, ensure you
%% follow the instructions in the README.md file to set up the bibliography
%% command line tool(biber).
\RequirePackage{hyperref} %% Hyperlinks package
\RequirePackage{lastpage} %% For retriving the total number of pages in the
%% typsset document
\RequirePackage{newfloat} %% For placing figures in the right place
\RequirePackage{fancyhdr} %% For custom headers and footers
\RequirePackage{caption} %% For custom captions
\RequirePackage[top=1in,bottom=1in,left=0.75in,right=0.75in]{geometry} %% Do
%% not change the margins, they are set by the IB and must be followed,
%% unless you are told explicitly to change them.

%% Language options
\babelprovide[import,main]{english} %% Main language

%% Spacing and Justification options
\AtBeginEnvironment{document}{\doublespacing} %% Set the spacing to double,
%% this is the default for IB Math IA's. If you want to change it, you can
%% do so by using the \singlespacing, \onehalfspacing, \doublespacing
%% commands and refer to the setspace package documentation linked here:
%% https://ctan.org/pkg/setspace?lang=en.

\justifying %% This is a must for Math IA's, and is loaded from the ragged2e:
%% https://ctan.org/pkg/ragged2e?lang=en.

%% Title page options
\renewrobustcmd{\maketitle}{
    \thispagestyle{empty}
    \section*{\@title}
    \vspace*{0.5cm}
    \hrule
    \vspace*{0.5cm}
    \@date\ and is \pageref{LastPage}\ pages long.
    \newpage
} %% The title page is generated by using the \maketitle command, and must
%% not contain any information indicating the author of the document. The
%% title page must contain the title of the document, the date it was written
%% and the total number of pages in the document. The titlepage,
%% tableofcontents, bibliography, and appendices are not numbered, and are
%% excluded from the page count.

%% Table of contents options
\renewrobustcmd{\tableofcontents}{
    \pagestyle{empty}
    \section*{Table of Contents}
    \vspace*{0.5cm}
    \hrule
    \vspace*{0.5cm}
    \@starttoc{toc}
    \newpage
    \setcounter{page}{1}
    \pagestyle{fancy}
    \restoregeometry
}


%% Headings and footers options
\fancyhead[C]{\small\scshape\@title} %% The title of the document is placed
%% in the center of the header. This is completly optional, and can be removed.
\fancyhead[R]{\small\scshape{\thepage/\pageref{LastPage}}} %% The page number
%% along with the total number of pages is placed in the right side of the
%% footer. This isnt required, but is an asthetic choice.
\fancyfoot{\hrule}

%% Figure options
%% There must be 2 types of images loaded by the typsetting engine:
%% 1. Images that are part of the document, and must be captioned as Figures.
%% 2. Images that are part of the data analysis, and must be captioned as
%% Graphs. Further both types of images must be numbered separately, and must
%% be in a [H] float environment. A image is loaded into the document by
%% using the \includegraphics command, and must be placed inside a figure or
%% graph enviorment. Avoid making any changes to the figure or graph
%% environments.

%% Figure environment
\floatplacement{figure}{H} %% Figures are placed in the right place
\renewrobustcmd{\figurename}{Figure} %% Figures are called Figures and must
%% not be used for graphical data.
\renewrobustcmd{\thefigure}{\arabic{figure}} %% Figures are numbered,
%% alternative numbering schemes are discouraged.

%% Graph environment
\DeclareFloatingEnvironment{graph}
\addto\captionsenglish{%
    \renewcommand{\graphname}{Graph}%
    \renewcommand{\figurename}{Figure}%
} %% Thank you Herr K https://tex.stackexchange.com/a/237203 for this part.
\floatplacement{graph}{H} %% Graphs are placed in the right place


\makeatletter
\renewcommand{\@floatboxreset} {%
        \reset@font
        \normalsize
        \@setminipage
\centering%<<<<<<<<<<<<<<<<<<<
}
\makeatletter


%% Bibliography options
\renewrobustcmd{\cite}[1]{
    \footfullcite{#1}
} %% Citations are footnotes, and must be used as such. The \cite command is
%% redefined to use the \footfullcite command from the biblatex package. This
%% convention was followed during the writing of this package, and is
%% encouraged by online resources.

\AtEndDocument{\newpage
\printbibliography[title={Bibliography},heading=
bibintoc]} %% The bibliography is printed at the end of the document, and is
%% numbered as a section. The bibliography is also included in the table of
%% contents.

%% Hyperlink options
\hypersetup{
    colorlinks=true,
    linkcolor=cyan,
    urlcolor=cyan,
    citecolor=cyan,
    linktoc=all,
    linktocpage=true,
    bookmarks=true
} %% Not needed but makes it easier to navigate the document.


